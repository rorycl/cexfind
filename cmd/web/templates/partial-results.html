<div id="results">
<h3>Results</h3>

{{ if .Err }}
<p>An error occurred:<br />{{ .Err }}</p>
{{ else }}

<div id="result-listing">
{{ $detailURL := .DetailURL }}
{{ $thisKey := "" }}
{{ range $result := .Results.Iter }}
{{ $key := $result.Key }}
{{ $box := $result.Box }}
{{ if ne $thisKey $key }}
{{ if eq $thisKey "" }}</ul>{{ end }}
<p class="model">{{- $key }}</p>
<ul>
{{ $thisKey = $key }}
{{ end }} {{/* end of thisKey */}}
<li>
    <span class="price">&pound;{{ $box.Price }}</span>
    <span class="name">{{ $box.Name }}</span>
    <span class="boxid"><a href="{{ $detailURL }}{{ $box.ID }}">{{ $box.ID}}</a></span>
</li>
{{ end }}
</div>

{{- end }} {{/* end not error */}}
</p>
</div>
